#!/bin/bash
#
# ia-mame startup bash script

declare root_path=$(readlink -f `dirname $0`)

declare lib_path="$root_path/../lib"

# The following is only needed when executing from 
# the sources tree, the jar beeing made available on the lib
# folder on the release tarball
declare ia_mame_jar="$root_path/../target/ia-mame.jar"
declare config_file="$root_path/../etc/config"
declare dry_run=0
declare debug=0

if [[ "$1" == "--dry-run" ]]; then
    dry_run=1
    shift 1
fi

if [[ "$1" == "--debug" ]]; then
    debug=1
    shift 1
fi

java -classpath "$lib_path/*:$ia_mame_jar" \
    -Diamame.configfile="$config_file" \
    -Diamame.dryrun=$dry_run \
    -Diamame.debug=$debug \
    org.tibennetwork.iamame.IaMame \
    $@
